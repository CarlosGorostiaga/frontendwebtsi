---
import type { ImageMetadata } from 'astro';

import imgGestion from '../assets/images/gestionproyectostsi.jpg';
import imgIDi from '../assets/images/IDi-servicios.jpg';
import imgInstalacion from '../assets/images/instalacionymontaje.jpeg';
import imgMantenimiento from '../assets/images/Mantenimiento.jpg';
import imgProduccion from '../assets/images/produccion-servicios.jpg';
import imgConsultoria from '../assets/images/consultoria-servicios.jpg';

interface ServiceDetail {
  id: string;
  title: string;
  subtitle: string;
  description: string;
  features: string[];
  img: ImageMetadata; // <- clave: antes era string o { src: string }
  benefits: string[];
  additionalInfo?: string;
}

const services: ServiceDetail[] = [
  {
    id: "gestion-de-proyectos",
    title: "Gestión de Proyectos",
    subtitle: "Planificación integral desde la concepción hasta la ejecución",
    description: "Nuestro equipo técnico especializado se encarga de planificar y orientar proyectos de imagen corporativa de inicio a fin. Adaptamos la gestión a los requisitos específicos de cada cliente, garantizando eficiencia, calidad y cumplimiento de plazos.",
    img: imgGestion,
    features: ["Toma de datos y análisis de requisitos", "Desarrollo de planos técnicos y constructivos", "Cálculos de ingeniería estructural", "Coordinación con equipos multidisciplinares", "Seguimiento y control de calidad", "Gestión de permisos y normativas"],
    benefits: ["Optimización de recursos y tiempos", "Reducción de costes por eficiencia", "Garantía de cumplimiento normativo", "Coordinación integral del proyecto"],
    additionalInfo: "Más de 500 proyectos gestionados con éxito en los últimos 10 años",
  },
  {
    id: "idi",
    title: "Desarrollo, Ingeniería e I+D+i",
    subtitle: "Innovación y tecnología aplicada a la comunicación visual",
    description: "Departamento de I+D+i especializado en ingeniería de producto y constructiva. Incorporamos constantemente nuevas tecnologías, materiales sostenibles y optimización de procesos productivos para ofrecer soluciones innovadoras.",
    img: imgIDi,
    features: ["Investigación en nuevos materiales", "Desarrollo de productos personalizados", "Ingeniería de procesos productivos", "Implementación de tecnologías sostenibles", "Prototipado y testing de soluciones", "Optimización energética y medioambiental"],
    benefits: ["Soluciones innovadoras y diferenciadas", "Mayor sostenibilidad medioambiental", "Reducción del impacto energético", "Ventaja competitiva tecnológica"],
    additionalInfo: "Centro de I+D+i certificado con 3 patentes propias",
  },
  {
    id: "produccion",
    title: "Producción",
    subtitle: "Fabricación avanzada con acabados impecables",
    description: "Nuestra planta de producción en Madrid cuenta con maquinaria de última generación para cubrir todas las fases productivas. Diferentes secciones especializadas garantizan alto rendimiento y acabados de máxima calidad.",
    img: imgProduccion,
    features: ["Cerrajería y estructuras metálicas", "Trabajos en plástico y materiales compuestos", "Sistemas de iluminación LED", "Impresión digital gran formato", "Corte y grabado láser de precisión", "Acabados y tratamientos superficiales"],
    benefits: ["Control total del proceso productivo", "Tiempos de entrega optimizados", "Calidad garantizada en cada fase", "Flexibilidad para proyectos únicos"],
    additionalInfo: "Planta de producción de 5.000 m² con tecnología de última generación",
  },
  {
    id: "instalacion",
    title: "Instalación y Montaje",
    subtitle: "Equipos especializados para cualquier envergadura",
    description: "Contamos con amplios equipos de montaje preparados para responder a actuaciones urgentes y grandes campañas. Instalamos cualquier elemento de imagen corporativa cumpliendo estrictamente con las normativas de seguridad y salud.",
    img: imgInstalacion,
    features: ["Equipos certificados en trabajos en altura", "Maquinaria especializada (grúas, plataformas)", "Instalaciones eléctricas homologadas", "Montaje de grandes estructuras", "Trabajos en espacios industriales", "Cumplimiento normativo de seguridad"],
    benefits: ["Máxima seguridad en las instalaciones", "Capacidad para proyectos de gran envergadura", "Respuesta rápida ante urgencias", "Experiencia en entornos complejos"],
    additionalInfo: "Cobertura nacional con respuesta en menos de 24h",
  },
  {
    id: "mantenimiento",
    title: "Mantenimiento",
    subtitle: "Red nacional de respuesta rápida",
    description: "Disponemos de una red de equipos de mantenimiento distribuidos estratégicamente para garantizar respuesta rápida en toda la Península Ibérica. Ofrecemos programas preventivos, correctivos y atención a siniestros.",
    img: imgMantenimiento,
    features: ["Mantenimiento preventivo programado", "Intervenciones correctivas urgentes", "Atención 24h para siniestros", "Sustitución de elementos dañados", "Actualización de sistemas de iluminación", "Obras civiles asociadas"],
    benefits: ["Prolongación de la vida útil", "Reducción de costes de reparación", "Imagen corporativa siempre perfecta", "Tranquilidad y servicio garantizado"],
    additionalInfo: "Servicio 24/7 con más de 50 técnicos especializados",
  },
  {
    id: "consultoria",
    title: "Consultoría e Imagen Corporativa",
    subtitle: "Estrategia integral de identidad visual",
    description: "Asesoramos a las empresas en la creación, rediseño y gestión de su identidad visual. Garantizamos coherencia en todos los soportes y puntos de contacto con sus clientes, desde la estrategia hasta la implementación.",
    img: imgConsultoria,
    features: ["Auditoría de identidad visual actual", "Desarrollo de manual de imagen corporativa", "Diseño de sistemas de señalización", "Estrategia de implementación por fases", "Formación a equipos internos", "Seguimiento y optimización continua"],
    benefits: ["Coherencia en todos los puntos de contacto", "Fortalecimiento de la marca", "Mayor impacto en el mercado", "Diferenciación competitiva clara"],
    additionalInfo: "Metodología propia avalada por más de 200 empresas",
  },
];
---

<section class="py-20 lg:py-24 bg-white">
  <div class="max-w-5xl mx-auto px-4 sm:px-6 lg:px-8">

    <!-- Intro -->
    <div class="text-center mb-20">
      <span class="inline-block px-3 py-1 text-sm font-semibold rounded-full bg-orange-100 text-orange-600 mb-4">Servicios</span>
      <h2 class="text-3xl lg:text-4xl font-light text-gray-900 mb-4">
        Un ecosistema completo de <span class="services-gradient font-semibold">servicios especializados</span>
      </h2>
      <p class="text-lg text-gray-600 max-w-3xl mx-auto">
        Cada servicio está diseñado para integrarse perfectamente con los demás, creando un flujo de trabajo completo desde la conceptualización hasta el mantenimiento continuo.
      </p>
    </div>

    <!-- Servicios -->
    <div class="space-y-24">
      {services.map((service) => (
        <article id={service.id} class="group scroll-mt-24">
          <div class="grid grid-cols-1 gap-12 items-start">

            <!-- Imagen + título -->
            <div class="flex flex-col items-center text-center">
              <div class="w-full max-w-xl aspect-video rounded-2xl overflow-hidden shadow-lg mb-6 group-hover:shadow-xl transition-shadow duration-300">
                <img
                  src={service.img.src}
                  alt={service.title}
                  class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"
                  loading="lazy"
                  decoding="async"
                  sizes="(max-width: 768px) 100vw, 640px"
                />
              </div>
              <h3 class="text-2xl lg:text-3xl font-bold text-gray-900">{service.title}</h3>
              <p class="text-orange-500 font-medium mt-1">{service.subtitle}</p>
            </div>

            <!-- Contenido -->
            <div class="max-w-3xl mx-auto">
              <p class="text-gray-700 leading-relaxed mb-8">{service.description}</p>

              <div class="mb-8">
                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                  <span class="w-1 h-5 bg-orange-500 rounded-full mr-3"></span>
                  Características principales
                </h4>
                <ul class="space-y-2">
                  {service.features.map((f) => (
                    <li class="flex items-start">
                      <svg class="w-4 h-4 text-orange-500 mr-3 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/></svg>
                      <span class="text-gray-700">{f}</span>
                    </li>
                  ))}
                </ul>
              </div>

              <div class="mb-8">
                <h4 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
                  <span class="w-1 h-5 bg-orange-500 rounded-full mr-3"></span>
                  Beneficios clave
                </h4>
                <div class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                  {service.benefits.map((b) => (
                    <div class="flex items-start p-3 bg-orange-50 rounded-lg border border-orange-100">
                      <svg class="w-4 h-4 text-orange-600 mr-2 mt-0.5 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>
                      <span class="text-gray-700 text-sm">{b}</span>
                    </div>
                  ))}
                </div>
              </div>

              {service.additionalInfo && (
                <div class="bg-gray-50 rounded-lg p-4 border-l-4 border-orange-500">
                  <p class="text-gray-800 font-medium">{service.additionalInfo}</p>
                </div>
              )}
            </div>

          </div>
        </article>
      ))}
    </div>

    <!-- CTA -->
    <div class="mt-20 bg-gradient-to-r from-gray-50 to-gray-100 rounded-2xl p-8 text-center">
      <h3 class="text-2xl font-light text-gray-900 mb-2">¿Listo para impulsar tu <span class="services-gradient font-bold">imagen corporativa</span>?</h3>
      <p class="text-gray-600 mb-6">Cuéntanos tu proyecto y te propondremos la mejor solución adaptada a tus necesidades</p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center">
        <a href="/contacto" class="px-6 py-3 bg-orange-500 hover:bg-orange-600 text-white font-medium rounded-lg transition shadow hover:shadow-md">Solicitar información</a>
        <a href="/proyectos" class="px-6 py-3 bg-white hover:bg-gray-50 text-gray-700 font-medium rounded-lg border border-gray-300 transition">Ver proyectos</a>
      </div>
    </div>

  </div>
</section>

<style>
  .services-gradient {
    background: linear-gradient(135deg, #f66500 0%, #ff8533 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }
  @supports not (background-clip: text) { .services-gradient { color: #f66500; } }
</style>
